# 第06节：vuex概述

### 一、Vuex的基本概念

Vuex用官方的话来说，Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。

Vuex 由五部分组成：State、Getter、Mutation、Action 和 Module。

 相信大家看了这些话，或多或少的会有一些困扰，字虽然都认识，但是却看不懂，下面我们用一个生动的例子，来了解一下。

如果把 Vue.js 比喻成路人（走路的人）的话，那么 Vuex 就是他的桑塔纳，如果他想去隔壁买包烟，那走过去就行了，开个车过去反而是一种负担，但是如果他想去几十公里的学校采花，那桑塔纳就得派上用场了，不然等他走过去，可能花儿都谢了。

**那它能够干什么？什么时候才使用它呢**?下面我们来看一下官方提供的代码：

``` js

new Vue({
  // state  数据源
  data () {
    return {
      count: 0
    }
  },
  // view  视图
  template: `
    <div>{{ count }}</div>
  `,
  // actions  事件
  methods: {
    increment () {
      this.count++
    }
  }
})

```

这是一个很简单的计数自增的案例，学过一点vue的都懂，通过increment事件，让count自增，然后渲染到页面上去。

这种方式就和买烟一样，属于短途效应，官方称为"单向数据流"，很好理解。

但是，现在情况变了，现在有A、B两个页面，还有两个要求
* 要求他们都可以对count进行操作
* 要求A修改了count，B立刻知道，B修改了count，A也立刻知道

怎么办？稍微有点开发知识的，就能够很容易的想到，把数据源 count 剥离开来，用一个全局变量或者全局单例的模式进行管理，这样不就在任何页面都可以很容易的取到这个状态了。
**这就是Vuex背后的思想，Vuex干的就是这个事情**，但是有同学又会迷茫，不就是全局模型吗？不用Vuex也一样可以实现。
但是，**Vuex 的目的是为了管理共享状态，为了达到这个目的，它制定了一系列的规则，比如修改数据源 state、触发 actions 等等，都需要遵循它的规则，以此来达到让项目结构更加清晰且易于维护的目的。**

### 二、什么时候使用Vuex

了解Vuex是干什么的了，就很容易选择什么时候使用Vuex。
我们要根据项目的需要，来衡量短期和长期的效益，如果不打算开发大型的单页应用，那 Vuex 可能还是你的一个负担。对于一些不大不小的项目，自己又懒得走，开车又觉得麻烦，那你骑个共享单车过去也行嘛。

这里的共享单车指代的是官方中的一个简单的 [store 模式](https://cn.vuejs.org/v2/guide/state-management.html#%E7%AE%80%E5%8D%95%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E8%B5%B7%E6%AD%A5%E4%BD%BF%E7%94%A8)，其实就是一个单纯的全局对象。
 
Vuex 和单纯的全局对象有以下两点不同：

1. Vuex 的状态存储是响应式的。当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会相应地得到高效更新。
2. 你不能直接改变 store 中的状态。改变 store 中状态的唯一途径就是显式地提交 (commit) mutation。这样使得我们可以方便地跟踪每一个状态的变化，从而让我们能够实现一些工具帮助我们更好地了解我们的应用。

下面我们来看一下Vuex的简单案例：
``` js
// 如果在模块化构建系统中，请确保在开头调用了 Vue.use(Vuex)

const store = new Vuex.Store({
  state: {
    count: 0
  },
  mutations: {
    increment (state) {
      state.count++
    }
  }
})
```
每一个 Vuex 应用的核心就是 store（仓库）。store 基本上就是一个容器，它包含着你的应用中大部分的**状态 (state)**

``` js
store.commit('increment') // 调用 mutations 中的方法
console.log(store.state.count) // -> 1
```

### 课后练习

1. 使用vuex完成一个计数器功能，让数值不能小于0
2. 使用vuex完成一个水果列表的添加和删除功能
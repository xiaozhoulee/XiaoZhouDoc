# 第05节：前端代码讲解

### 一、导航守卫

导航守卫主要用于实现在页面发生跳转时，检测token的存在，如果token没有或失效，网页则回到登录页面，代码如下。

``` js

router.beforeEach((to, from, next) => {
  let token = localStorage.getItem("token");
  console.log(token)
  if (token || to.path === "/") {
      next();
  } else {
      next({
          path:"/"
      });
  }
})

```

### 二、封装请求方法

在教务管理系统中，我们需要自己封装请求方法，以完成一些麻烦的任务，封装的代码如下。

``` js
import axios from "axios"

const service = axios.create({
    baseURL: "http://127.0.0.1:7001/"
})
export default service
```

### 三、登录请求功能

在登录的过程中，我们需要向后台发送数据，并对后台传的数据，进行判断，以做出各种网页的效果，代码如下所示。

``` js

    login() {
      request({
        url:"/login",
        method:'post',
        data:this.dataQ
      }).then(res => {
        console.log(res)
            if (res.data.data == "密码错误！" ) {
              alert("密码错误！");
            };
            if (res.data.data == "用户不存在") {
              alert("用户不存在");   
            };
            if (res.data.code == 20000 ) {
              localStorage.setItem("token",res.data)
              this.$router.push("/Class");
              console.log(res.data)
            };
          })
          .catch(err => {
            console.log(err);
          });
    }

```

### 四、退出登录

在教务管理系统中，有一个退出登录的按钮，点击他时，就会自动退出登录状态，并返回至登录页面，代码如下所示。

``` html 
<el-button type="danger" @click="quit">退出登录</el-button>

<script>

    quit() {
      localStorage.removeItem("token");
      this.$router.replace("/");
      console.log("已经执行删除token");
    },

</script>

```
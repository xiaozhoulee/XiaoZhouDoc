# 第07节：再谈HTTP协议

### 一、请求

HTTP请求方法共有九种
在HTTP 1.0中定义了三种方法：GET,POST和HEAD方法
在HTTP 1.1中新增了六种方法：OPTIONS、PUT、PATCH、DELETE、TRACE 和 CONNECT 方法。


get/post请求： 之间的区别： 
  
##### get :  特点

* 地址栏会发生变化。 
* 请求的参数会显示在地址栏当中。 
* 数据不安全。 
* 提交的数据量是有限制。 
* get请求,效率高。 
    
##### post ： 特点： 

* 地址栏不会发生变化 。
* 请求的参数会封装到请求体当中。 
* 提交的数据是安全的。 
* 提交的数据量没有任何的限制。 
* post请求 解决乱码问题方便。 
#### 请求方法

![请求方法](../images/0807_method.png)

### 二、响应


#### HTTP状态码

http的状态码被分为5大类，状态码为客户端提供一种理解事务处理结果的便携方式。

1. 100~199（信息性状态码）：HTTP/1.1向协议中引入了信息性状态码
2. 200~299（成功状态码）：客户端发起请求时，这些请求通常都是成功的。服务器有一组用来表示成功的状态码，分别对应于不同类型的请求
3. 300~399（重定向状态码）：重定向状态码要么告知客户端使用替代位置来访问他们所感兴趣的资源，要么就提供一个替代的响应而不是资源的内容
4. 400~499（客户端状态码）：有时客户端会发送一些服务器无法处理的东西。浏览网页时，我们都看到过臭名昭著的404 Not Found错误码，这只是服务器在告诉我们，它对我们请求的资源一无所知
5. 500~599（服务器状态码）：有时客户端发送了一条有效请求，服务器自身却出错了，这些会返回5xx状态码


常用的HTTP状态码

* 100：客户端继续请求
* 101：客户端切换协议
* 200 OK ：请求被正常处理
* 202：客户端向服务器发送的请求还没被处理
* 204 No Content：客户端向服务器发出的请求被正常处理，服务器没有内容可返回
* 206 Partial Content ：客户端只是请求资源的一部分，服务器只对请求的部分资源执行GET方法，相应报文通过content-range指定范围的资源
* 301 Moved Permanently：永久性重定向，表示请求的资源已经永久的搬到了其他位置，就是说资源已经被分配了新的URI 
* 302 Found：临时性重定向，表示请求的资源被暂时地放到了新的URI，和301很相似，只不过资源只是暂时被移动，将来还可能发生转移
* 303 See Other：(禁止被缓存)和302很类似，请求的资源被转移到另一个URI，与302不同的是，该状态明确要求客户端使用GET方法重定向到该URI
* 304 No Modified：与重定向无关，客户端向服务器发起带条件的请求的时候，条件不满足时返回该状态码，协商缓存时返回
* 307 Temporary Redirect：临时重定向，与303相似，但是遵循标准，不强制使用GET方法
* 400 Bad Request：客户端发送的请求语法或参数有误，服务器无法识别
* 401 Unauthorized：发送的请求需要http认证信息或认证失败了
* 403 Forbidden：客户端请求的对应资源禁止被访问（客户端的请求服务器能识别，但是拒绝请求）
* 404 Not Found：服务器找不到客户端请求的资源，也有可能是服务器不想 让你访问而故意返回404
* 500 Internal Server Error：服务器内部错误
* 503 Service Unavailable：服务器正超负载或停机维护，无法处理请求


#### 响应协议： 服务器给浏览器发送的响应： 遵循响应协议。 
  
   1： 组成:（四部分）
   
   响应首行： 
   响应头信息： 
   响应空行： 
   响应体： 

### 三、http协议

#### TCP/IP协议

HTTP协议是构建在TCP/IP协议之上的，是TCP/IP协议的一个子集，所以要理解HTTP协议，有必要先了解下TCP/IP协议相关的知识。

由于TCP/IP协议族包含众多的协议，在这里我们无法一一讨论。接下来，我们仅介绍理解HTTP协议需要掌握的TCP/IP协议族的一些相关知识点。如果想深入理解TCP/IP协议，可以参考经典书籍《TCP/IP详解》。

#### TCP/IP协议族分层

TCP/IP协议族是由一个四层协议组成的系统，这四层分别为：应用层、传输层、网络层和数据链路

如下图

![TCP/IP示意图](../images/0807_TCP&IP.png)

分层的好处是把各个相对独立的功能解耦，层与层之间通过规定好的接口来通信。如果以后需要修改或者重写某一个层的实现，只要接口保持不变也不会影响到其他层的功能。接下来，我们将会介绍各个层的主要作用。

应用层

应用层一般是我们编写的应用程序，其决定了向用户提供的应用服务。应用层可以通过系统调用与传输层进行通信。

处于应用层的协议非常多，比如：FTP（File Transfer Protocol，文件传输协议）、DNS（Domain Name System，域名系统）和我们本章讨论的HTTP（HyperText Transfer Protocol，超文本传输协议）等。

传输层

传输层通过系统调用向应用层提供处于网络连接中的两台计算机之间的数据传输功能。

在传输层有两个性质不同的协议：TCP（Transmission Control Protocol，传输控制协议）和UDP（User Data Protocol，用户数据报协议）。

网络层

网络层用来处理在网络上流动的数据包，数据包是网络传输的最小数据单位。该层规定了通过怎样的路径（传输路线）到达对方计算机，并把数据包传输给对方。

链路层

链路层用来处理连接网络的硬件部分，包括控制操作系统、硬件设备驱动、NIC（Network Interface Card，网络适配器）以及光纤等物理可见部分。硬件上的范畴均在链路层的作用范围之内。
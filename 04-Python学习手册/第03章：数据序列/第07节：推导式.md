# 第07节：推导式 

### 本节目标
- 列表推导式 
- 字典推导式 
- 集合推导式 
### 一、列表推导式
列表推导式又叫列表生成式

作用：用一个表达式创建一个有规律的列表或控制一个有规律列表。

结构：它的结构是在一个中括号里包含一个表达式，然后是一个for语句，然后是 1 个或多个 for 或者 if 语句。那个表达式可以是任意的，意思是你可以在列表中放入任意类型的对象。返回结果将是一个新的列表，在这个以 if 和 for 语句为上下文的表达式运行完成之后产生。  

列表推导式的执行顺序：各语句之间是嵌套关系，左边第二个语句是最外层，依次往右进一层，左边第一条语句是最后一层。
#### 1、体验列表推导式
需求：创建一个0-10的列表    
实例:  
``` python
# 1、循环实现
    # 1.1创建空列表
    # 1.2循环就将有规律的数据写入到列表
# 2、列表推导式实现(简化代码，创建或控制有规律的列表)

# while循环实现 -----------
list1 = []
i = 0
while i <10:
    list1.append(i)
    i += 1

print(list1)

# for循环实现 -------------
list1 = []
for i in range(10):
    list1.append(i)

print(list1)
 
# 推导式实现 -------------
# 中括号里的内容和for循环里一样只是多了前面一个i，这个i代表的是整个推导式要返回的数据
list1 = [i for i in range(10)]
print(list1)
# 注意：读列表推导式时要从for开始读起
```
#### 2、带if的列表推导式
需求：创建0-10的偶数列表
``` python
# 我们按照由简到难的顺序来学习

# 1、简单的列表推导式（步长）
list1 = [i for i in range(0,10,2)] # 使用步长求偶数
print(list1)

# 2、for循环加if求偶数
list2 = []
for i in range(10):
    if i % 2 == 0:
        list2.append(i) # 把i的数据赋值给list2
print(list2)

# 3、在推导式里使用if求偶数
list3 = [i for i in range(10) if i % 2 ==0] # 直接把if写在推导式里就可以
print(list3)
```
#### 3、多个for循环实现列表推导式
需求：  
``` python
# 输出一个这样的列表
[(1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)] 
```
实例：  
``` python
# 需求分析
# [(1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]
# 我们仔细观察一下这个列表，其实他就是两个循环嵌套在一起，外层循在环循环数据1时内层循则环循环1次从0到3

# for循环加if方法
list1 = [] # 创建一个空列表
for i in range(1,3): # 循环
    for j in range(0,3):
        list1.append((i,j))
print(list1)

# 推导式方法
list1 = [(i,j) for i in range(1,3) for j in range(3)]
print(list1)
```
### 二、字典推导式

字典推导式作用：快速合并列表为字典或提取字典中目标数据。  
#### 1、体验字典推导式
实例：  
``` python
# 需求：创建一个字典：字典key是1-5数字，value是这个数字的2次方。

dict1 = {i: i**2 for i in range(1,5)} 
# 这里面的i:**2就是字典里的键对值 i是key值，i**2是value值
print(dict1) # 输出结果：# {1: 1, 2: 4, 3: 9, 4: 16}
```
#### 2、将两个列表合并为一个字典
实例：  
``` python
# 1、两个列表数据长度一样
list1 = ['name', 'age', 'gender']
list2 = ['岳绮罗', 18, 'man']

dict1 = {list1[i]: list2[i] for i in range(len(list1))}
# range(len(list1))代表数字3（因为list1的长度为3），再返回一个键值对也就是list1[i]: list2[i]
print(dict1)

# 2、两个列表数据长度不一样
list1 = ['name', 'age', 'gender',"id"]
list2 = ['岳绮罗', 18, 'man']

# dict1 = {list1[i]: list2[i] for i in range(len(list1))}  # 报错
dict1 = {list1[i]: list2[i] for i in range(len(list2))} # 正确
print(dict1)

# 注意如果两个列表的长度不同，则需要len一个数据为小的列表才可以正常执行代码
```
#### 3、提取字典中目标数据
实例：  
``` python
counts = {'MBP': 268, 'HP': 125, 'DELL': 201, 'Lenovo': 199, 'acer': 99}

# 需求：提取上述电脑数量大于等于200的字典数据
count1 = {key: value for key, value in counts.items() if value >= 200}
print(count1) # 输出结果：{'MBP': 268, 'DELL': 201}

# 分析代码
'''
for key, value in counts.items() # 找到counts这个字典的所有数据
if value >= 200 # 判断数据是否大于等于200，如果是则返回该数据
key: value # 返回值
'''
```
### 三、集合推导式
注意：由于集合推导式在工作中几乎不会使用，所以我们只需要了解一下简单的案例就可以。  
实例： 
``` python
# 需求，创建一个集合，数据为下方列表的二次方
# list1 = [1, 1, 2]

# 代码如下
list1 = [1,1,2,3,4,4,5]
set1 = {i ** 2 for i in list1}
print(set1)  # 输出结果：{1, 4, 9, 16, 25}

# 注意：集合有去重功能，会自动消除相同的数据
```
### 四、总结
本节重点：  

- 推导式的作用：简化代码
- 推导式写法

``` python
# 列表推导式
[xx for xx in range()]

# 字典推导式
{xx1: xx2 for ... in ...}

# 集合推导式
{xx for xx in ...}
```
### 五、作业

- 1、使用列表推导式输出100以内能被2整除的数字    
- 2、使用字典推导式提取字典中的数据:萧炎
    - dict1 = {"姓名": "萧炎","年龄23": 23,"修为": "斗帝"}
- 3、使用集合推导式去除重复数据
    - s1 = {1,1,2,5,6,48,7,9,6,5,4,1,2,3,65,2,6,52,6,9,5}

参考答案：  
``` python
# 1、使用列表推导式输出100以内能被2整除的数字  
list1 = [i for i in range(100) if i % 2 ==0]
print(list1)

# 2、使用字典推导式提取字典中的数据:萧炎
dict1 = {"姓名": "萧炎","年龄23": 23,"修为": "斗帝"}
dict1 = {key:value for key,value in dict1.items() if value == "萧炎"}
print(dict1)

# 3、使用集合推导式去除重复数据
s1 = {1,1,2,5,6,48,7,9,6,5,4,1,2,3,65,2,6,52,6,9,5}
s1 = {i for i in s1}
print(s1)
```
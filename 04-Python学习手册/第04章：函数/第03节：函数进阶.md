# 第03节：函数进阶

### 一、目标
- 递归
- lambda表达式
- 高阶函数

### 二、递归
#### 1、递归的应用场景
    在日常工作中如果要遍历一个文件夹内的所有文件，我们一般用递归来写。
#### 2、 什么是递归？
递归实际上就是函数自己调用自己的过程。基本格式如下：   
``` python
def recursion():
    return recursion

recursion()
```
#### 3、递归的特点
- 函数内部自己调用自己
- 必须有出口
#### 4、 应用 ----- 用递归实现3以内数字累计加和、
``` python
'''
1、如何求3内的累加和？
    3以内累加和的结果是3+2+1=6
2、我们可以理解为求累加和就是求当前的数字加上当前的数字减-1
    例如：6=3+3-1+2-1
'''

def sum_numbers(num):
    # 1.如果是1，直接返回1 -- 这里的returu就是出口，如果没有出口就和陷入到一个类似死循环的情况
    if num == 1:
        return 1
    # 2.如果不是1，重复执行累加并返回结果
    return num + sum_numbers(num-1)


result = sum_numbers(3)
print(result) # 输出结果为：6
```
递归并不常用，所以我们现在只需要简单理解一下就可以了。 
### 三、lambda表达式
#### 1、lambda简介
如果一个函数有一个返回值，并且只有一句代码，可以使用 lambda简化。  
#### 2、lambda语法
``` python
lambda 参数列表 ： 表达式
```
注意：  
- lambda表达式的参数可有可无（根据需求来决定写不写），函数的参数在lambda表达式中完全适用。
- lambda表达式能接收任何数量的参数但只能返回一个表达式的值。
#### 3、体验lambda
``` python
# 新建一个返回值为100的函数
# 1、函数
def num1():
    return 100

result = num1()
print(result)

# 2、lambda
num2 = lambda : 100
print(num2) # 直接打印lambda表达式得到的结果是lambda的内存地址
print(num2()) # 打印函数调用求的才是lambda的返回值
```
#### 4、计算两个数字的加和
``` python
# 使用函数计算两个数字的加和

# 函数方法
def num1(a,b):
    return a+b
print(num1(5,6)) # 11

# lambda方法
num2 = lambda a,b: a+b
print(num2(5,6)) # 11
```
#### 5、lambda的参数形式
- 无参数
    ```python
    fn1 = lambda: 100
    print(fn1())
    ```
- 一个参数
    ```python
    # 1、普通函数
    def num1(a):
        return a
    print(num1('hello word'))

    # 2、lambda函数
    num2 = lambda a:a
    print(num2("hello word"))
    ```
- 默认参数
    ```python
    # 1、普通函数
    def num1(a,b,c=100):
        return a+b+c
    print(num1(10,20))

    # 2、lambda函数
    num2 = lambda a, b, c=100: a + b + c
    print(num2(10, 20))
    ```
- 可变参数：*args
    ```python
    # 1、普通函数
    def num1(*args):
        return args
    print(num1(11,22,33))

    # 2、lambda函数
    num2 = lambda *args: args
    print(num2(11, 22, 33))
    ```
    > 注意：这里的可变参数传入到lambda之后，返回值为元组。
- 可变参数：**kwargs
    ```python
  # 1、普通函数
    def num1(**kwargs):
        return kwargs
    print(num1(name='白狐',age=1000))
    # 2、lambda函数
    num2 = lambda **kwargs: kwargs
    print(num2(name='白狐', age=1000))
    ```
#### 6、lambda应用
- 带判断的lambda
    ``` python
    # 比较数据a和数据b的大小谁大返回谁
    fn1 = lambda a, b: a if a > b else b
    print(fn1(1000, 500)) # 1000
    ```
- 列表数据按字典key的值排序
    ``` python
    students = [
        {'name': 'aaa',"age": 18},
        {'name': 'bbb','age': 67},
        {'name': 'ccc','age': 33}
    ]
    # 按name值升序排列
    students.sort(key=lambda x: x['name'])
    print(students)

    # 按name值降序排列
    students.sort(key=lambda x: x['name'],reverse=True) # reverse=True代表降序的意思，如果不写则默认升序
    print(students)

    # 按age值降序升列
    students.sort(key=lambda x: x['age'])
    print(students)
    ```

### 四、高阶函数
把函数当参数传入，这样的函数被称为高阶函数。高阶函数是函数式编程的体现。     
#### 1、体验高阶函数
在学习高阶函数之前我们先学会两个小函数，后面会用到。    
- 在Python中，`abs()`函数可以完成对数字求绝对值计算。
    ``` python
        print(abs(-10)) # 10
    ```
- `round()`函数可以完成对数字的四舍五入计算。
    ``` python
    print(round(1.8)) # 2
    print(round(6.6)) # 7
    ```

实例：  
``` python
# 需求：任意两个数字在进行求绝对值或四舍五入后再进行求和计算

# 方法1 -------只能单一求绝对值，不够灵活
def add_num(a, b):
    '''对函数进行求绝对值操作'''
    return abs(a) + abs(b)

result = add_num(-1, 2)
print(result)  # 3

# 方法2 ------- 把函数变成形参，想要什么函数就把他写成实参就可以了
def sum_num(a, b, f):
    return f(a) + f(b)

result = sum_num(-1, 2, abs)
print(result)  # 3

result = sum_num(5.5,6.8,round)
print(result) # 13
```
#### 2、内置高阶函数
1、map()函数：

map(funcion, list)，将传入的函数变量function作用到list变量的每个元素中，并将结果组成新的列表(Python2)/迭代器(Python3)3返回。   

实例：  
``` python
# 需求：计算`list1`序列中各个数字的2次方。

# 1、准备列表
list1 = [1,2,3,4,5]
# 2、准备二次方计算函数
def func(x):
    return x**2 # 这里我们是求的是二次方（根据需求来写）
# 3、使用map函数
result=map(func,list1)

# 4、打印成果
print(result) # <map object at 0x000001A2F72FE0C8> -----直接打印的结果是获取的是内存地址
print(list(result)) # [1, 4, 9, 16, 25] ------ 转换成列表再打印就可以了
```
2、reduce()函数：   

reduce(function，list)，其中function必须有两个参数。每function计算的结果继续和序列的下一个元素做累积计算(加减乘除)。 
> 注意：reduce()传入的参数func必须接收2个参数。  

实例：   
``` python
# 需求：计算`list1`序列中各个数字的累加和。
list1 = [1, 2, 3, 4, 5]

# 导入模块
import functools

# 定义函数
def fun(a,b):
    return a+b

# 调用reduce函数
result = functools.reduce(fun,list1)
print(result) # 15
```
3、filter()函数：

filter(func, lst)函数用于过滤序列, 过滤掉不符合条件的元素, 返回一个 filter 对象。如果想打印列表, 可以使用 list() 来转换。   

实例：   
``` python
# 只要能别2整除的数

list1 = [1,2,3,4,5,6,7,8,9,10]

def func(x):
    return x %2 ==0

result = filter(func,list1)
print(result) # <filter object at 0x0000028BD4CE06C8> ---- 内存地址
print(list(result)) # [2, 4, 6, 8, 10]  ----需手动转换成list
```
### 五、总结

- 递归

  - 函数内部自己调用自己
  - 必须有出口

- lambda

  - 语法

  ``` python
  lambda 参数列表: 表达式
  ```

  - lambda的参数形式

    - 无参数

    ``` python
    lambda: 表达式
    ```

    - 一个参数

    ``` python
    lambda 参数: 表达式
    ```

    - 默认参数

    ``` python
    lambda key=value: 表达式
    ```

    - 不定长位置参数

    ``` python
    lambda *args: 表达式
    ```

    - 不定长关键字参数

    ``` python
    lambda **kwargs: 表达式
    ```

- 高阶函数

  - 作用：把函数作为参数传入，化简代码
  - 内置高阶函数
    - map()
    - reduce()
    - filter()

### 六、作业
1、新建一个列表列表数据为数字1-5，并使用map()函数让列表中的每个数值都加上3  

2、新建一个列表列表数据为数字1-5，并使用reduce()函数让列表中的数据相乘   

3、新建一个列表列表数据为数字1-10，并使用filter()函数求出列表中的奇数

参考答案：   
``` python
# 第一题：
list1 = [1,2,3,4,5]

def fun(a):
    return a+3

result = map(fun,list1)
print(list(result))

# 第二题
list1 = [1,2,3,4,5]

import functools

def func(a,b):
    return a*b

result = functools.reduce(func,list1)
print(result)

# 第三题
list1 = [1,2,3,4,5,6,7,8,9.10]

def func(x):
    return x%2==1

result = filter(func,list1)
print(list(result))
```

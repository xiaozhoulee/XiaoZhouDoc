# 第02节：函数进阶

### 本节目标
- 变量作用域
- 函数的返回值(多个返回值)
- 函数的参数(详细讲解)
- 拆包和交换两个变量的值
- 引用
- 可变和不可变类型
### 一、变量的作用域
变量的作用域就是变量作用的范围。  
变量的作用域分为两种：局部变量和全局变量
#### 1、局部变量
局部变量就是在函数体内的变量，只在函数体内部生效。

实例：  
``` python
def num():
    a=100
    print(a)

num() # 输出结果为100

# 访问函数体内的变量
print(a) # 报错

# 局部变量只能在函数体内访问，在函数体外访问会报错
```
#### 2、全局变量
全局变量和局部变量不同的全局变量他在函数体内外都可以访问。

实例：  
``` python
# 新建全局变量
a = 100

# 函数test1访问全局变量a,并打印
def test1():
    print(a)

# 函数test2访问全局变量a，并打印
def test2():
    print(a)

# 调用函数
test1() # 100
test2() # 100
```
#### 3、修改全局变量
在函数体修改全局变量需要加一个global关键字。     

实例：   
``` python
# 新建全局变量100
a = 100

# 在num1函数里调用a
def num1():
    print(a)


# 在num2函数里调用a，并把全局变量a的值改为200
def num2():
    global a
    a = 200
    print(a)

# 再新建一个num3函数，调用a查看a的值是否被修改
def num3():
    print(a)

# 打印函数a和b
num1() # 100
num2() # 200
num3() # 200 ----全局变量a的值已被修改
```
### 二、函数的返回值(多个返回值)
一个函数是可以存在多个返回值的。  

实例：  
``` python
def jy():
    a = 10
    b = 20
    return a,b

print(jy()) # 打印结果：(10, 20)
```
多个函数的返回值默认为元组类型，也可以返回其他数据序列。  

返回列表：  
``` python
def jy():
    a = 10
    b = 20
    return a,b
print(jy())
```
函数返回值作为参数传递   
``` python
# 返回值可以当参数传递

def test1():
    return 50

def test2(num):
    print(num)

# 新建一个变量保存test1的返回值
result = test1()
# 将函数所在的变量当成参数传递到test2函数里
test2(result)
```
### 三、函数的参数(详细讲解)
函数里调用的参数分为四种类型：   
- 位置参数
- 关键字参数
- 默认参数
- 不定长参数
#### 1、位置参数
调用位置函数时根据函数定义的参数位置来传递参数。  

实例：  
``` python
def user_info(name,age,gender):
    print(f'我的名字是{name},我今年{age}岁,我的性别是{gender}')

user_info('秦牧',18,'男') # 正确
user_info('秦牧',18) # 数量不一致，报错！
user_info(18,'秦牧','男') # 顺序不一致，报错！
```
> 注意：传递参数的顺序和个数必须一致，否则会报错。  
#### 2、关键字参数
函数调用以 “键=值” 的形式来书写，可以忽略shi使函数看起更加的清晰、容易使用，同时也清除了书写参数的顺序要求。  
 
实例：  
``` python
def user_info(name,age,gender):
    print(f'我的名字是{name},我今年{age}岁,我的性别是{gender}')

# 关键字参数用法
user_info(name='秦牧',age=18,gender="男")

# 打乱顺序也不会报错
user_info(age=18,name='秦牧',gender='男')

# 位置函数和关键字函数同时存在
user_info('秦牧',gender='男',age=18)
```
> 注意：函数调用时，如果有位置参数时，位置参数必须在关键字参数的前面，但关键字参数之间不存在先后顺序。
#### 3、默认参数
函数的参数可以加上默认值，调用函数时如果没有传递参数，则会使用默认值。  

实例：  
``` python
# 给性别设置一个默认参数为“男”
def user_info(name,age,gender="男"):
    print(f'我的名字是{name},我今年{age}岁,我的性别是{gender}')
    
user_info("巫妖王",18) # 打印结果：我的名字是疯魔,我今年18岁,我的性别是男
```
> 注意：函数调用时，如果为默认参数传值则修改默认参数值；否则使用这个默认值。  
#### 4、不定长参数
不定长参数也叫可变参数。用于不确定调用的时候会传递多少个参数(不传参也可以)的场景。此时可以用*args来接收N个位置的函数（转换成元组），**kwargs来接收N个位置ID关键字（转换成字符串）。  

1、*args包裹位置传递   
包裹位置传递用 * 号后面加任意字符串表示，工作后人为约定用 *args表示位置传递。 

实例：     
``` python
# 注意：传进的所有参数都会被args变量收集，它会根据传进参数的位置合并为一个元组(tuple)，args是元组类型，这就是包裹位置传递。

def ajax(*args):
    print(args)

ajax('汤姆')  # 打印结果：('汤姆',)
ajax('疯不觉',18,"男的") # 打印结果：('萧炎', 18, '男的')

# 如果没有参数则会打印一个空元组
ajax() # 打印结果：()
```
2、*kwargs包裹关键字传递
包裹关键字传递用 ** 号后面加任意字符串表示，工作后人为约定用 **kwargs来表示关键字传递。   

实例：  
``` python
# 注意：传进的所有参数都会被kwargs变量收集，它会根据传进参数的位置合并为一个字典(dict)，kwargs是元组类型，这就是包裹位置传递。

def ajax(**kwargs):
    print(kwargs)

ajax(name="杰瑞",age=53) # 打印结果：{'name': '杰瑞', 'age': 53}
```
> 综上：无论是包裹位置传递还是包裹关键字传递，都是一个组包的过程。

### 四、拆包和交换变量值
#### 1、元组拆包
元组拆包就是把函数返回的元组重新拆分成数据。   

实例：   
``` python
def num():
    a=10
    b=20
    return a,b

# 未使用拆包
num1 = num()
print(num1) # (10,20)  -- 打印的是一个元组

# 如果想a和b这两个数据单独拆出来则需要进行拆包操作
num1,num2 = num()
print(num1) # 10
print(num2) # 20
```
#### 2、字典拆包
实例：  
``` python
dict2 = {"name": "汤姆","age": 18}
# 因为有两个键值对所以使用两个变量来接收
a,b = dict2

# 对字典进行拆包取出来的是字典的key值
print(a) # name
print(b) # age

#通过上面的拆包操作我们已经得到了key值，现在只需要通过key查找它的value值就行了
print(dict2[a]) # 汤姆
print(dict2[b]) #18
```
#### 3、交换变量的值
例如：a = 10 -- b = 20，我想把a的数据变成20b的数据变成10这就是交换变量的值。   

方法一：  
借助第三方变量存储数据   
``` python
a = 10
b = 20

# 1. 定义中间变量
c = 0

# 2. 将a的数据存储到c,此时c = 10
c = a

# 3. 将b的数据20赋值到a，此时a = 20
a = b

# 4. 将之前c的数据10赋值到b，此时b = 10
b = c

print(a)
print(b)
```
方法二：   
一次创建两个变量     
``` python
a,b = 10,20
print(a)
print(b)

# 把a赋值给b，把b赋值给a
a,b = b,a
print(a)
print(b)
```
### 五、引用
#### 1、了解引用
在python中值是通过引用来传递的。  

引用的概念：例如新建一个 a=10 的变量，在执行a=10时计算机要做的事情就是在内存中开辟了一个空间，并把数据10存到那个空间里，此时a指代的就是刚刚存储数据的这个内存的名字而已。我们可以简单的理解为python中的所有数据都是通过变量来传递的。   

我们可以用`id()`来判断两个变量是否为同一个值的引用。可以将id值理解为那块内存的地址标识。  

实例：  
``` python
# 1、不可变类型 -- int
a = 1
b = a

# 不管打印a和b数据都是1
print(b) # 1

# 既然数据相同我们来求它们的id地址是否相同
print(id(a)) # 140710078083344
print(id(b)) # 140710078083344

# 把a的数据改为2再看看他们的id地址是否相同
a = 2

print(b) # int为不可变类型所以修改了a的数据影响不到b

print(id(a)) # 140710227112240  此时得到的是数据2的内存地址
print(id(b)) # 140710227112208


# 2、可变类型 -- 列表

aa = [10,20]
bb = aa

# 验证aa和bb的id地址是否相同
print(id(aa)) # 2183346016840
print(id(bb)) # 2183346016840

# 给aa添加一个数据
aa.append(30)
# 打印bb观察数据是否相等
print(bb) # [10, 20, 30] 列表为可变类型所以aa添加了一个数据bb也跟着添加了
# 再次验证aa和dd的id地址
print(id(aa)) # 2183346016840
print(id(bb)) # 2183346016840
# 依旧相同
```
#### 2、引用当做实参传入
实例：   
``` python
# 验证引用是否能当做实参

def test(a):
    print(a)

# 把引用当实参调用
a = 100
test(a) # 调用成功 ---- 打印结果：100
# 引用可以当做实参传入
```
### 六、可变类型和不可变类型
可变类型与不可变类型是指：数据直接进行修改，如果能直接修改那么就是可变，否则是不可变。    

- 可变类型
  - 列表
  - 字典
  - 集合
- 不可变类型
  - 整型
  - 浮点型
  - 字符串
  - 元组
 
### 七、总结

- 变量作用域
  - 全局：函数体内外都能生效
  - 局部：当前函数体内部生效
- 函数多返回值写法

``` python
return 表达式1, 表达式2...
```
- 函数的参数
  - 位置参数
    - 形参和实参的个数和书写顺序必须一致
  - 关键字参数
    - 写法： `key=value`
    - 特点：形参和实参的书写顺序可以不一致；关键字参数必须书写在位置参数的后面
  - 默认参数
    - 写法：`key=vlaue`
  - 不定长位置参数
    - 收集所有位置参数，返回一个元组
  - 不定长关键字参数
    - 收集所有关键字参数，返回一个字典
- 引用：Python中，数据的传递都是通过引用

















